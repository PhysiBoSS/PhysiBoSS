<PhysiCell_settings version="devel-version">

    <cell_rules>
        <rulesets>
            <ruleset protocol="CBHG" version="2.0" format="csv" enabled="true">
                <folder>config</folder>
                <filename>rules.csv</filename>
            </ruleset>
        </rulesets>
    </cell_rules>


	<domain>
		<x_min>-300</x_min> 
		<x_max>300</x_max>
		<y_min>-300</y_min>
		<y_max>300</y_max>
		<z_min>-30</z_min>
		<z_max>30</z_max>
		<dx>20</dx> 
		<dy>20</dy> 
		<dz>20</dz>
		<use_2D>true</use_2D>
	</domain>
	
	<overall>
		<max_time units="min"> 4200 </max_time>  <!-- 4200 -->
		<time_units>min</time_units>
		<space_units>micron</space_units>
		<dt_diffusion units="min">0.01</dt_diffusion>
		<dt_mechanics units="min">0.1</dt_mechanics>
		<dt_phenotype units="min">6</dt_phenotype>	
	</overall>
	
	<parallel>
		<omp_num_threads>4</omp_num_threads>
	</parallel> 
	
	<save>
		<folder>output</folder>  

		<full_data>
			<interval units="min">40</interval>
			<enable>true</enable>
		</full_data>
		
		<SVG>
			<interval units="min">40</interval>
			<enable>true</enable>
		</SVG>
		
		<legacy_data>
			<enable>true</enable>
		</legacy_data>
	</save>
	
	<microenvironment_setup>
		<variable ID="0" name="oxygen" units="mmHg">
			<physical_parameter_set>
				<diffusion_coefficient units="micron^2/min">100000.0</diffusion_coefficient>
				<decay_rate units="1/min">.1</decay_rate> 
			</physical_parameter_set>
			<initial_condition units="mmHg">38.0</initial_condition>
			<Dirichlet_boundary_condition enabled="true" units="mmHg">38.0</Dirichlet_boundary_condition>
		</variable>
		
		<variable ID="1" name="drug_X" units="mmol">
			<physical_parameter_set>
				<diffusion_coefficient units="micron^2/min">100000.0</diffusion_coefficient>
				<decay_rate units="1/min">0.0</decay_rate> 
			</physical_parameter_set>
			<initial_condition units="molecules/voxel">0.0</initial_condition>
			<Dirichlet_boundary_condition enabled="false" units="molecules/voxel">1.0</Dirichlet_boundary_condition>
		</variable>

		<variable ID="2" name="drug_Y" units="mmol">
			<physical_parameter_set>
				<diffusion_coefficient units="micron^2/min">100000.0</diffusion_coefficient> 
				<decay_rate units="1/min">0.0</decay_rate> 
			</physical_parameter_set>
			<initial_condition units="molecules/voxel">0.0</initial_condition>
			<Dirichlet_boundary_condition enabled="false" units="molecules/voxel">0.1</Dirichlet_boundary_condition>
		</variable>

		<options>
			<calculate_gradients>false</calculate_gradients>
			<disable_automated_spring_adhesions>false</disable_automated_spring_adhesions>

			<virtual_wall_at_domain_edge>true</virtual_wall_at_domain_edge>
			<track_internalized_substrates_in_each_agent>true</track_internalized_substrates_in_each_agent>
			 
			<initial_condition enabled="false" type="matlab">
				<filename>./config/initial.mat</filename>
			</initial_condition>
			 
			<dirichlet_nodes enabled="false" type="matlab">
				<filename>./config/dirichlet.mat</filename>
			</dirichlet_nodes>
		</options>
	</microenvironment_setup>		
	
	<cell_definitions>
		<cell_definition ID="0" name="default">
			<phenotype>
				<cycle code="5" name="live">  
					<phase_transition_rates units="1/min"> 
						<rate end_index="0" fixed_duration="false" start_index="0">0.00209</rate> 
					</phase_transition_rates>
				</cycle>
				
				<death>  
					<model code="100" name="apoptosis"> 
						<death_rate units="1/min">5.31667e-05</death_rate>
						
						<phase_durations units="min">
							<duration fixed_duration="true" index="0">516</duration>
						</phase_durations>
						<parameters>
							<unlysed_fluid_change_rate units="1/min">0.05</unlysed_fluid_change_rate>
							<lysed_fluid_change_rate units="1/min">0</lysed_fluid_change_rate>
							<cytoplasmic_biomass_change_rate units="1/min">1.66667e-02</cytoplasmic_biomass_change_rate>
							<nuclear_biomass_change_rate units="1/min">5.83333e-03</nuclear_biomass_change_rate>
							<calcification_rate units="1/min">0</calcification_rate>
							<relative_rupture_volume units="dimensionless">2.0</relative_rupture_volume>
						</parameters>
					</model> 

					<model code="101" name="necrosis">
						<death_rate units="1/min">0.0</death_rate>
						<phase_durations units="min">
							<duration fixed_duration="true" index="0">0</duration>
							<duration fixed_duration="true" index="1">86400</duration>
						</phase_durations>
						<parameters>
							<unlysed_fluid_change_rate units="1/min">0.05</unlysed_fluid_change_rate>
							<lysed_fluid_change_rate units="1/min">0</lysed_fluid_change_rate>
							<cytoplasmic_biomass_change_rate units="1/min">1.66667e-02</cytoplasmic_biomass_change_rate>
							<nuclear_biomass_change_rate units="1/min">5.83333e-03</nuclear_biomass_change_rate>
							<calcification_rate units="1/min">0</calcification_rate>
							<relative_rupture_volume units="dimensionless">2.0</relative_rupture_volume>
						</parameters>
					</model> 
				</death>					
								
				<secretion>
					<substrate name="oxygen"> 
						<secretion_rate units="1/min">0</secretion_rate>
						<secretion_target units="substrate density">38</secretion_target>
						<uptake_rate units="1/min">10</uptake_rate>
						<net_export_rate units="total substrate/min">0</net_export_rate> 
					</substrate> 
				</secretion>

				<molecular />
				<intracellular type="maboss">
					<bnd_filename>./AGS_all_nodes.bnd</bnd_filename>
					<cfg_filename>./AGS_all_nodes.cfg</cfg_filename>
					<settings>
						<intracellular_dt>10</intracellular_dt>
						<time_stochasticity>1</time_stochasticity>
					</settings>
				</intracellular>
			</phenotype>
			
			<custom_data>
				

				<drug_X_permeability type="double" units="amol/um^3">0.00021979189</drug_X_permeability> 
				<drug_X_target type="string" units="">anti_PI3K</drug_X_target>
				<drug_X_half_max type="double" units="mM">3.3857220000000006e-05</drug_X_half_max>
				<drug_X_Hill_coeff type="double" units="mM">5.503406625769999</drug_X_Hill_coeff>

				<drug_Y_permeability type="double" units="amol/um^3"> 0.0 </drug_Y_permeability>
				<drug_Y_target type="string" units="">none</drug_Y_target>
				<drug_Y_half_max type="double" units="mM">0.0</drug_Y_half_max>
				<drug_Y_Hill_coeff type="double" units="mM">0.0</drug_Y_Hill_coeff>

				<basal_growth_rate type="double" units="1/min">0.00209</basal_growth_rate> 
				<hill_coeff_growth type="double" units="dimensionless">6.9505</hill_coeff_growth>
				<K_half_growth type="double" units="dimensionless">0.0585</K_half_growth>
			
				<apoptosis_rate_basal type="double" units="1/min">5.31667e-05</apoptosis_rate_basal>
				<max_apoptosis_rate type="double" units="1/min">0.0098</max_apoptosis_rate>
				<hill_coeff_apoptosis type="double" units="dimensionless">3.6787</hill_coeff_apoptosis>
				<K_half_apoptosis type="double" units="dimensionless">0.0193</K_half_apoptosis>
				
				<hill_coeff_pressure type="double" units="1/min">6.9583485811</hill_coeff_pressure>
				<pressure_half type="double" units="1/min">4.7920543763</pressure_half> 
				
				<w1_growth type="double" units="dimensionlaess">0.2215</w1_growth>
				<w2_growth type="double" units="dimensionlaess">0.2574</w2_growth>

				<w1_apoptosis type="double" units="dimensionlaess">0.1092</w1_apoptosis>
				<w2_apoptosis type="double" units="dimensionlaess">0.3765</w2_apoptosis>

				<reactivation_rate_mean type="double" units="1/min">0.0</reactivation_rate_mean>
				<reactivation_rate_sd type="double" units="1/min">0.0</reactivation_rate_sd>
				
			</custom_data>
		</cell_definition>
	</cell_definitions>

	<initial_conditions>
        <cell_positions type="csv" enabled="false">
            <folder>./config</folder>
            <filename>cells.csv</filename>
        </cell_positions>
    </initial_conditions>


	<user_parameters>
		<random_seed type="int" units="dimensionless">1.0</random_seed>
		 
		<tumor_radius type="double" units="um"> 5.0 </tumor_radius> <!-- 225.0-->
		<cell_spacing type="double" units="um"> 1.6 </cell_spacing> <!-- 1.6 -->
		<membrane_length type="int" units=""> 0 </membrane_length>
    	
		<drug_X_pulse_period type="double" units="min"> 0 </drug_X_pulse_period> 
		<drug_X_pulse_duration type="double" units="min"> 10 </drug_X_pulse_duration> 
		<drug_X_pulse_concentration type="double" units="min">0.000175</drug_X_pulse_concentration>

		<drug_Y_pulse_period type="double" units="min"> 0 </drug_Y_pulse_period> 
		<drug_Y_pulse_duration type="double" units="min">0</drug_Y_pulse_duration> 
		<drug_Y_pulse_concentration type="double" units="min">0.0</drug_Y_pulse_concentration>

		<mutation_rate_mean type="double" units="uM?"> 0 </mutation_rate_mean> <!-- from https://bionumbers.hms.harvard.edu/bionumber.aspx?s=n&v=20&id=100417 -->
		<mutation_rate_sd type="double" units="uM?"> 0 </mutation_rate_sd>

	</user_parameters>
	
	
</PhysiCell_settings>